// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String    @id @default(cuid())
  email     String    @unique
  password  String
  role      Role      @default(USER)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  inquiries Inquiry[]
  sessions  Session[]

  @@map("users")
}

model Session {
  id        String   @id @default(cuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  sessionId String   @unique
  userAgent String?
  ipAddress String?
  expiresAt DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("sessions")
}

model Category {
  id          String    @id @default(cuid())
  name        String
  slug        String    @unique
  description String?
  image       String?
  active      Boolean   @default(true)
  vehicles    Vehicle[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("categories")
}

model Vehicle {
  id            String    @id @default(cuid())
  name          String
  slug          String    @unique
  description   String?
  price         Float
  year          Int
  make          String
  fuelType      String
  transmission  String?   // Transmission type for filtering
  images        String[]
  specs         Json?     // Vehicle specifications stored as JSON
  status        Status    @default(AVAILABLE)
  featured      Boolean   @default(false)
  active        Boolean   @default(true)
  categoryId    String
  category      Category  @relation(fields: [categoryId], references: [id])
  inquiries     Inquiry[]
  
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@map("vehicles")
}

model Inquiry {
  id           String        @id @default(cuid())
  vehicleId    String?
  vehicle      Vehicle?      @relation(fields: [vehicleId], references: [id])
  userId       String?
  user         User?         @relation(fields: [userId], references: [id])
  customerName String
  email        String
  phone        String?
  message      String
  notes        String?
  status       InquiryStatus @default(NEW)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  @@map("inquiries")
}

// Settings model removed - consolidated into ContactInfo

model HomepageContent {
  id                    String   @id @default(cuid())
  
  // Essential Hero Section Only
  heroTitle             String   @default("Premium Commercial")
  heroSubtitle          String   @default("Trucks")
  heroDescription       String   @default("Discover elite truck solutions built for businesses that demand excellence, reliability, and uncompromising performance.")
  heroButtonPrimary     String   @default("Explore Trucks")
  heroButtonSecondary   String   @default("Get Quote")
  
  // Coming Soon Section
  comingSoonImage       String   @default("/uploads/Technology_background.png")
  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("homepage_content")
}

model Partner {
  id        String   @id @default(cuid())
  name      String
  logo      String
  website   String?
  active    Boolean  @default(true)
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("partners")
}

model CompanyInfo {
  id                  String   @id @default(cuid())
  
  // About Section
  companyName         String   @default("EVTL")
  companyDescription  String   @default("For over 25 years, we've been the trusted partner for businesses seeking premium commercial trucks. Our commitment to excellence drives everything we do.")
  foundedYear         Int      @default(1998)
  
  // Stats
  totalVehiclesSold   Int      @default(2500)
  totalHappyCustomers Int      @default(850)
  totalYearsExp       Int      @default(25)
  satisfactionRate    Int      @default(98)
  
  // Story
  storyTitle          String   @default("Our Story")
  storyParagraph1     String   @default("Founded in 1998, EVTL began as a small family business with a simple mission: to provide high-quality commercial trucks to businesses that demand excellence. What started as a modest dealership has grown into one of the region's most trusted commercial truck providers.")
  storyParagraph2     String   @default("Over the years, we've built our reputation on three core principles: quality trucks, exceptional service, and honest business practices. Our experienced team understands that choosing the right commercial truck is crucial for your business success.")
  storyParagraph3     String   @default("Today, we continue to evolve with the industry, embracing new technologies and sustainable practices while maintaining the personal touch and attention to detail that our customers have come to expect.")
  
  // Mission & Vision
  missionTitle        String   @default("Our Mission")
  missionText         String   @default("To empower businesses with premium commercial trucks and exceptional service, enabling them to achieve their goals while building long-lasting partnerships based on trust and mutual success.")
  visionTitle         String   @default("Our Vision") 
  visionText          String   @default("To be the leading commercial truck provider, recognized for our commitment to quality, innovation, and customer satisfaction, while contributing to sustainable transportation solutions for future generations.")
  
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@map("company_info")
}

model CompanyValue {
  id          String   @id @default(cuid())
  title       String
  description String
  iconName    String   // Store icon name as string (Shield, Handshake, Clock, Heart)
  order       Int      @default(0)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("company_values")
}

model TeamMember {
  id          String   @id @default(cuid())
  name        String
  position    String
  description String
  image       String?
  order       Int      @default(0)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("team_members")
}

model Certification {
  id          String   @id @default(cuid())
  name        String
  order       Int      @default(0)
  active      Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("certifications")
}


model ContactInfo {
  id              String   @id @default(cuid())
  
  // Phone Numbers
  salesPhone      String   @default("+1 (555) 123-4567")
  servicePhone    String   @default("+1 (555) 123-4568")
  financePhone    String   @default("+1 (555) 123-4569")
  
  // Email Addresses
  salesEmail      String   @default("sales@evtl.com")
  serviceEmail    String   @default("service@evtl.com")
  supportEmail    String   @default("support@evtl.com")
  
  // Address
  address         String   @default("123 Business Avenue")
  city            String   @default("Commercial District")
  state           String   @default("NY")
  postcode        String   @default("10001")
  country         String   @default("United States")
  directions      String   @default("Near Metro Station")
  
  // Business Hours
  mondayToFriday  String   @default("8:00 AM - 6:00 PM")
  saturday        String   @default("9:00 AM - 4:00 PM")
  sunday          String   @default("Closed")
  
  // Settings (migrated from Settings table)
  siteName              String  @default("EVTL")
  emailNotifications    Boolean @default(true)
  systemNotifications   Boolean @default(true)
  maintenanceMode       Boolean @default(false)
  
  // Footer Settings
  companyDescription    String  @default("EVTL Sdn. Bhd. is a next-generation mobility startup focusing on Electric Trucks (EV Trucks) and future smart transport solutions.")
  facebookUrl           String  @default("")
  twitterUrl            String  @default("")
  instagramUrl          String  @default("")
  linkedinUrl           String  @default("")
  privacyPolicyUrl      String  @default("/privacy")
  termsOfServiceUrl     String  @default("/terms")
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("contact_info")
}

enum Role {
  ADMIN
  MANAGER
  USER
}

enum Status {
  AVAILABLE
  SOLD
  RESERVED
}

enum InquiryStatus {
  NEW
  CONTACTED
  RESOLVED  // Changed from RESPONDED
  CLOSED
}